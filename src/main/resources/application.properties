spring.application.name=gstock

# --- Server (cloud injecte PORT) ---
server.port=${PORT:8080}

# --- Profile actif (prod par défaut en cloud) ---
spring.profiles.active=${SPRING_PROFILES_ACTIVE:prod}

# --- Datasource via ENV (LOCAL = MySQL par défaut) ---
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/gestion_stock?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:GS_User}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:Manager}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:}

# --- JPA / Hibernate ---
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${SPRING_HIBERNATE_FORMAT_SQL:false}
# Laisse Hibernate inférer, sinon force le dialecte via ENV :
spring.jpa.database-platform=${SPRING_JPA_DIALECT:org.hibernate.dialect.MySQL8Dialect}

# --- Locale / Thymeleaf ---
spring.mvc.locale=fr_FR
spring.mvc.locale-resolver=fixed
spring.thymeleaf.cache=${SPRING_THYMELEAF_CACHE:true}

# --- Logging (paramétrable via ENV) ---
logging.level.org.hibernate.SQL=${LOG_SQL_LEVEL:INFO}
logging.level.org.hibernate.orm.jdbc.bind=${LOG_BIND_LEVEL:INFO}
logging.level.org.springframework.security=${LOG_SECURITY_LEVEL:INFO}
